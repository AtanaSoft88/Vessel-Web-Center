@using VesselWebCenter.Data.Models
@using VesselWebCenter.Data.Constants
@model PagingList<VesselsViewModel>
@{
	ViewData["Title"] = "Vessels currently registered";
}
<link rel="stylesheet" href="~/css/interactiveButton.css" asp-append-version="true" />
<h1 class="rounded-pill  shadow fst-italic" style="-webkit-text-fill-color:lightseagreen">@ViewData["Title"]</h1>
<div class="card-body form-control border-primary shadow-lg">
	<table class="table table-striped table-hover table-bordered border-success bg-primary bg-opacity-10">
		<thead>
			<tr class="bg-success shadow-lg text-warning">
				<td class="bg-body col-2" align="center">Vessel Name</td>
				<td class="bg-body" align="center">Vessel Type</td>
				<td class="bg-body" align="center">CallSign</td>
				<td class="bg-body" align="center">Length Overall</td>
				<td class="bg-body" align="center">Breadth</td>
				<td class="bg-body col-1" align="center">Visited Ports Number</td>
				<td class="bg-body" align="center">Last Port Of Call</td>
				<td class="bg-body" align="center">Details for:</td>
				@if (User.IsInRole(RoleConstants.USER_OWNER))
				{
					<td class="bg-body" align="center">
						Voyage Availability <br /><label title="For Vessels with minimum 15 Crew members on board">
							«〈Show Info〉»
						</label>
					</td>
				}
			</tr>
		</thead>
		<tbody class="table-hover link-success">

			@foreach (var vsl in Model)
			{
				<tr>
					<td>@vsl.Name</td>
					<td>@vsl.VesselType</td>
					<td>@vsl.CallSign</td>
					<td>@vsl.LOA m</td>
					<td>@vsl.Breadth m</td>
					@if (User?.Identity?.IsAuthenticated ?? false)
					{
						<td>
							@vsl.PortsOfCall?.Count()

						</td>
						<td><p>@vsl?.PortsOfCall?.LastOrDefault()?.PortName</p></td>
					}
					else
					{
						<td style="-webkit-text-fill-color:darkred">Unavailable info</td>
						<td style="-webkit-text-fill-color:darkred">Unavailable info</td>
					}
					<td>
						<form method="get">

							@if (User?.Identity?.IsAuthenticated ?? false)
							{
								<label style="font-style:oblique;-moz-animation-fill-mode:forwards" asp-for="@vsl.Id">See more details⊳</label>
								<input type="submit" class="btn-success btn-lg rounded-circle  border-3 btn-outline-warning shadow-lg rounded-3" title="@vsl.Name" name="vesselId" value="@vsl.Id" asp-controller="Vessel" asp-action="ChooseAVessel" />
							}
							else
							{
								<label style="font-style:oblique;-moz-animation-fill-mode:forwards" asp-for="@vsl.Id">
									<a class="btn-outline-warning btn-success badge badge"
							   asp-route-returnUrl="/Vessel/GetAllVessels" asp-controller="Account" asp-action="Login">Login for more Info</a>
								</label>
								<input type="submit" disabled="disabled" class="btn-success btn-lg btn" title="@vsl.Name" name="vesselId" value="@vsl.Id" asp-controller="Vessel" asp-action="ChooseAVessel" />
							}

						</form>
					</td>
					@if (User.IsInRole(RoleConstants.USER_OWNER))
					{
						<td class="bg-primary bg-opacity-25 text-center">
							<h6 class="text-center">@(vsl.VesselAvailableForVoyage == true ? "✔️" : "❌")</h6>
						</td>
					}
				</tr>
			}
		</tbody>
	</table>
	@{
		var previousDisabled = !Model.PreviousPage ? "disabled" : "";
		var nextDisabled = !Model.NextPage ? "disabled" : "";
		
	}
	<div class="btn-group-sm">
		<a asp-action="GetAllVessels"
		   asp-route-pageNumber="@(Model.PageIndex-1)"
		   class="btn btn-outline-dark rounded-pill @previousDisabled" style="background-color:darkorchid">
			⫷Previous
		</a>
		@for (int i = 1; i <= Model.TotalPages; i++)
		{
			<a asp-action="GetAllVessels"
		   asp-route-pageNumber="@(i)"
		   class="buttonZ btn-group rounded-pill @nextDisabled" >
				@i
			</a>
		}
		<a asp-action="GetAllVessels"
		   asp-route-pageNumber="@(Model.PageIndex+1)"
		   class="btn btn-outline-dark rounded-pill @nextDisabled" style="background-color:darkorchid">
			Next⫸
		</a>		

	</div>
</div>

